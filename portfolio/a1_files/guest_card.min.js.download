+function(e,t){t.core.register({name:"ppGuestCard",component:"guestCard",reset:!0,module:function(){var i=t.fx,a=0;return{init:function(n){function r(t,a,n){o=l.find(".js-loader"),i.fade("in",o,.3),""==t?(e("#view_floorplan_space_config").html('<li class="vertform-item select"><div class="select-menu light" data-ui="select-menu"><span class="select-menu-val" data-menu="value"></span><i class="icon" data-app-icon="V" aria-hidden="true"></i><select id="selected_property_floorplan" data-menu="selector" name="application[property_floorplan_id]" aria-label="'+__("Select")+'" class="first-value"> <option value="">'+__("Select One")+'</option></select><label for="property_floorplan_id">'+__("Floorplans")+(ppGuestCardConfig.is_required_desired_floorplans?'<span class="req"> *</span>':'<span class="optional_field"> '+__("(Optional)")+"</span>")+"</label></div></li>"+(ppGuestCardConfig.is_space_configuration_available?'<li class="vertform-item select"><div class="select-menu light" data-ui="select-menu"><span class="select-menu-val" data-menu="value"></span><i class="icon" data-app-icon="V" aria-hidden="true"></i><select id="space_configuration_id" data-menu="selector" name="application[desired_space_configuration_id]" aria-label="'+__("Select")+'" class="first-value"><option value="" data-floorplan_id="">'+__("Select One")+'</option></select><label for="space_configuration_id">'+__("Space Configurations")+(ppGuestCardConfig.is_required_desired_floorplans?'<span class="req"> *</span>':'<span class="optional_field"> '+__("(Optional)")+"</span>")+"</label></div></li>":"")),i.fade("out",o,.3)):e.ajax({type:"post",url:ppGuestCardConfig.exit_tags_view_floorplans+"is_floorplans/1",data:{lease_start_window_id:t,property_floorplan_id:""+a,space_configuration_id:""+n},success:function(e){l.find("#view_floorplan_space_config").html(e),a&&(l.find("#selected_property_floorplan").removeClass("first-value"),l.find("#selected_property_floorplan").parent().find(".select-menu-val").text(l.find("#selected_property_floorplan option:selected").text()),s(a,n)),i.fade("out",o,.3)}})}function s(t,i){l.find("#space_configuration_id").addClass("first-value"),l.find("#space_configuration_id").parent().find(".select-menu-val").text(""),i?(l.find("#space_configuration_id").parent().find(".select-menu-val").text(l.find("#space_configuration_id option:selected").text()),l.find("#space_configuration_id").removeClass("first-value")):(l.find("#space_configuration_id").parent().find(".select-menu-val").text(""),l.find("#space_configuration_id option:selected").prop("selected",!1)),l.find("#space_configuration_id").parent().find(".optional_field").text(""),""===t&&(l.find("#space_configuration_id").parent().find(".select-menu-val").text(""),l.find("#space_configuration_id").parent().find(".optional_field").text("(Optional)")),l.find("#space_configuration_id option").each(function(){var i=e(this);return i.hide(),""===i.data("floorplan_id")?void i.show():void(Number(t)===Number(i.data("floorplan_id"))&&i.show())})}var o,d,l=e(n),p=function(){o=l.find(".js-loader"),a?(l.find("#guest-card-as-resident").removeClass("is-hidden"),l.find("#guest-card-simple").addClass("is-hidden")):(l.find("#guest-card-as-resident").addClass("is-hidden"),l.find("#guest-card-simple").removeClass("is-hidden")),l.find(".js-toggle-resident-form").each(function(){var t=e(this);a==t.prev("input").val()&&t.prev("input").attr("checked",!0)}),l.find(".js-submit").addClass("disabled"),l.find(".js-limit-text").each(function(){var t=e(this);c(t),e(document).on("resizeend",function(){c(t)})}),entrataUI.components.init("body"),t.ui.initUiElements(l),l.find('.entrata-ui-datepicker input[type="text"]').removeAttr("placeholder")},c=function(e){var t=e.prop("scrollHeight"),i=e.innerHeight();t>i&&e.height(t+10)},f=function(){l.find(".g-recaptcha").length&&!l.find(".g-recaptcha").data("recaptcha-loaded")?PP_APP.newRecaptchaManager.render({recaptchaId:l.find(".g-recaptcha").attr("id"),siteKey:ppGuestCardConfig.siteKey},u,_):l.find(".js-submit").removeClass("disabled")},u=function(e){l.find(".g-recaptcha").data("recaptcha-loaded",!0),l.find(".js-submit").removeClass("disabled"),"undefined"!=typeof ppGuestCardConfig&&"undefined"!=typeof ppGuestCardConfig.isInvisibleRecaptcha&&(d=e,l.off("clickortap.guestCardSubmit",".js-submit:not(.disabled)").on("clickortap.guestCardSubmit",".js-submit:not(.disabled)",function(e){grecaptcha.execute(d)}))},_=function(e){"undefined"!=typeof ppGuestCardConfig&&"undefined"!=typeof ppGuestCardConfig.isInvisibleRecaptcha&&m(e)},m=function(t){var a=l.find("#guest_card_form"),n=l.find("#guest_card_form").attr("action")+"section/contact_widget/";if("undefined"!==ppConfig.is_responsive_snippet&&"1"===ppConfig.is_responsive_snippet)return a.submit(),!0;ppConfig.hasOwnProperty("is_responsive_wrapper")&&(n+="is_wrapper/1/");var s=l.find("#selected_property_floorplan").val(),c=l.find("#space_configuration_id").val();e.ajax({type:"post",url:n,data:a.serialize(),success:function(t){i.fade("out",o,.3),l.html(t),p();var a=l.find(".error-container");a.length?("undefined"!=typeof ppGuestCardConfig&&"undefined"!=typeof ppGuestCardConfig.isInvisibleRecaptcha&&grecaptcha.reset(d),e("html, body").animate({scrollTop:a.offset().top},"fast"),e(".modal-overlay").last().animate({scrollTop:a.offset().top-e(window).scrollTop()},"fast")):e("#gdpr_cookie_wrapper").addClass("slide-me"),l.find("#selected_lease_start_window").length&&""!==l.find("#selected_lease_start_window").val()&&r(l.find("#selected_lease_start_window").val(),s,c),f()}})};p(),f(),l.on("keyup keydown",".js-limit-text",function(i){var a=500,n=e(this);t.ui.characterCount(this,a)<=50?n.parent().find(".counter").text(__("{%d, 0} / {%d, 1}",[a-t.ui.characterCount(this,a),a])):n.parent().find(".counter").text(""),c(n)}).on("clickortap",".live-chat-link",function(){var t=e(this).attr("href");window.open(t,"live_chat_guest_card","width=700,height=545,top=200px,left=420px,scrollbars=no,toolbar=no,resizable=no")}).on("click change",".js-toggle-resident-form",function(t){var i=e(this).prev("input").val();e(this).is("input")&&(i=e(this).is(":checked")),l.find(".error-container").empty(),1==i?(e("#resident-name").attr("class","has-value").val(e("#gc-first-name").val()+" "+e("#gc-last-name").val()),e("#resident-email").attr("class","has-value").val(e("#gc-email").val()),e('input[name="customer_phone_number[phone_number]"]').val()&&(e('input[name="manager_contact[phone_number]"]').val(e('input[name="customer_phone_number[phone_number]"]').val()),e('input[name="masked-manager_contact[phone_number]-base"]').attr("class","has-value").val(e('input[name="masked-customer_phone_number[phone_number]-base"]').val()),e('input[name="masked-manager_contact[phone_number]-country"]').attr("class","has-value").val(e('input[name="masked-customer_phone_number[phone_number]-country"]').val())),e("#resident_message").attr("class","has-value").val(e("#send_email_text").val()),l.find("#guest-card-as-resident").removeClass("is-hidden"),l.find("#guest-card-simple").addClass("is-hidden"),a=1):(l.find("#guest-card-as-resident").addClass("is-hidden"),l.find("#guest-card-simple").removeClass("is-hidden"),a=0),l.hasClass("js-modal-content")?e(".modal-overlay").last().animate({scrollTop:l.parent().offset().top-e(window).scrollTop()},"fast"):e("html, body").animate({scrollTop:l.parent().offset().top-100})}).on("clickortap",".js-phone-toggle",function(t){var i=e(this).prev("input").val(),a=l.find("#phone_number_type"),n=l.find(".entrata-ui-phone-container .phone-number-wrapper label");"1"==i?(n.html(__("Mobile Number")),a.val("4"),n.find(".optional_field").addClass("is-hidden")):(n.html(__("Phone Number")),a.val("2"),n.find(".optional_field").removeClass("is-hidden"))}).on("clickortap",".js-toggle-behalf",function(t){var i=e(this).prev("input").val();1==i?(l.find(".senior-citizen").addClass("is-hidden"),l.find("#senior_is_text_alert_yes").attr("disabled","disabled"),l.find("#senior_is_text_alert_no").attr("disabled","disabled"),l.find(".non-senior :input").prop("disabled",!1),l.find(".non-senior").show()):(l.find(".senior-citizen").removeClass("is-hidden"),l.find("#senior_is_text_alert_yes").removeAttr("disabled"),l.find("#senior_is_text_alert_no").removeAttr("disabled"),l.find(".non-senior :input").prop("disabled",!0),l.find(".non-senior").hide(),l.find("#phone_number_type").val(2),l.find("#alert_primary_phone_label").text(__("Phone Number")),l.find("#is_text_alert_no").attr("checked","checked"))}).on("clickortap",".js-senior-phone-toggle",function(t){var i=e(this).prev("input").val(),a=l.find("#senior_phone_number_type"),n=l.find("#senior_alert_primary_phone_label");"1"==i?(n.html(__("Mobile Number")),a.val("4"),n.siblings(".optional_field").addClass("is-hidden")):(n.html(__("Phone Number")),a.val("2"),n.siblings(".optional_field").removeClass("is-hidden"))}).on("change","#lead_source_id",function(t){var i=e("option:selected",this).attr("lead-type");e("#lead_source_type").val(i),"referrer"==i?e("li.referrers-name").removeClass("is-hidden"):(e("li.referrers-name").addClass("is-hidden"),e("#referrer-first-name").val(""),e("#referrer-last-name").val(""))}).on("change","#selected_lease_start_window",function(){r(e(this).val(),"","")}).on("change","#selected_property_floorplan",function(){e(this).removeClass("first-value"),s(e(this).val(),"")}).on("change","#space_configuration_id",function(){e(this).removeClass("first-value")}).on("change","#preferred_cities",function(){var t=e("#list_of_properties").attr("action");i.fade("in",o,.3);var a=e("#preferred_cities").val();e.ajax({type:"post",dataType:"json",url:t,data:{selected_preferred_city:a,is_preferred_property_ajax_request:!0},success:function(t){i.fade("out",o,.3),e("#preferred_properties").on("focus",function(){var i=e("#preferred_properties").find("option:eq(0)").html();if(e("#preferred_properties").siblings("span.select-menu-val").html(i),e("#preferred_properties").find("option:gt(1)").remove(),void 0!==t.property_list){var a="";e(t.property_list).each(function(e,t){a+='<option value="'+t.property_id+'">'+t.property_name+"</option>"}),e("#preferred_properties").append(a)}})},error:function(){i.fade("out",o,.3)}})}).on("clickortap",".js-submit",function(t){return t.preventDefault(),e(this).hasClass("disabled")||(i.fade("in",o,.3),e(this).addClass("disabled"),"undefined"!=typeof ppGuestCardConfig&&"undefined"!=typeof ppGuestCardConfig.isInvisibleRecaptcha||m()),!1}).on("click change",".js-pet-toggle",function(t){var i=e(this).prev("input").val();1==i?l.find(".desired_pets").removeClass("is-hidden"):(l.find(".desired_pets").addClass("is-hidden"),l.find("#desired_pets").find("option:selected").removeAttr("selected"),l.find(".desired_pets_value").text("Select One"))}).on("click","#privacy_policy_acknowledgement_statement_checkbox",function(){e(this).prop("checked")?(l.find(".js-submit").prop("disabled",!1),l.find(".js-submit").removeClass("disabled")):(l.find(".js-submit").prop("disabled",!0),l.find(".js-submit").addClass("disabled"))})},destroy:function(t){e(t).off().removeData("component")}}}})}(jQuery,PP_APP),jQuery(document).ready(function(e){e(".snippets-container").length&&"undefined"!=typeof ppGuestCardConfig?e.publish("manager.startModule",[{module:"ppGuestCard",component:"guestCard",data:[".snippets-container"]}]):e("#contact-page-form").length&&e.publish("manager.startModule",[{module:"ppGuestCard",component:"guestCard",data:["#contact-page-form .js-contact-form-content"]}])}),+function(e,t){t.core.register({name:"ppGuestCardConfirmation",component:"guestCard",reset:!0,module:function(){return{init:function(t,i,a){var n=e(t),r=n.find(".error_container"),s=n.find(".js-modal-title"),o=i||{};a||(o.hasOwnProperty("is_contact_info")?(o.hasOwnProperty("is_from_request_info")?trackingEvent(arrstrCustomCategoryArray.conversion,arrstrCustomActionArray.form_submit,"Request Submit Form",!0):(trackingEvent(arrstrCustomCategoryArray.conversion,arrstrCustomActionArray.form_submit,"Submit Button",!0),"undefined"!=typeof ppConfig.data_layer_contact_us_details&&""!==ppConfig.data_layer_contact_us_details&&trackingDataLayer(ppConfig.data_layer_contact_us_details)),1==ppConfig.is_facebook_pixel_tracking&&fbq("track","Lead",{form_submit:"Guest Card Submit Button",property_name:ppConfig.property_name}),s.html(__("Guest card Submitted"))):o.hasOwnProperty("is_availability_alert")?(trackingEvent(arrstrCustomCategoryArray.conversion,arrstrCustomActionArray.form_submit,"Alert Submit Form",!0),1==ppConfig.is_facebook_pixel_tracking&&fbq("track","Lead",{form_submit:"Alert Submit Form",property_name:ppConfig.property_name}),s.html(__("Alert set successfully."))):o.hasOwnProperty("is_schedule_tour")&&(e(".js-modal.schedule-tour").find(".js-modal-title").html(__("Guest card Submitted")),1==ppConfig.is_facebook_pixel_tracking&&fbq("track","Lead",{form_submit:"Schedule Tour Submit Form",property_name:ppConfig.property_name}),trackingEvent(arrstrCustomCategoryArray.conversion,arrstrCustomActionArray.form_submit,"Schedule Tour Submit Form",!0)),n.data("component","guestCard")),n.on("clickortap","#submit_online_rental_application",function(){n.find("#confirmation_text").hide(),n.find("#confirmation_msg").hide(),n.find("#password_section").show()}).on("clickortap","#submit_guestcard",function(t){var i=n.find("#password").val(),a=n.find("#confirm_password").val(),s=!0;if(r.html(""),0<=i.length)if(""===i&&(s=!1,r.html('<div class="error"><i class="icon" data-app-icon="r" aria-hidden="true"></i>'+__("Password is required.")+"</div>").css("display","block")),s&&6>i.length&&(s=!1,r.append('<div class="error"><i class="icon" data-app-icon="r" aria-hidden="true"></i>'+__("Password must be at least 6 characters long.")+"</div>").css("display","block")),s&&12<i.length&&(s=!1,r.append('<div class="error"><i class="icon" data-app-icon="r" aria-hidden="true"></i>'+__("Password must be less than 12 characters.")+"</div>").css("display","block")),s&&""===a)r.append('<div class="error"><i class="icon" data-app-icon="r" aria-hidden="true"></i>'+__("Confirm Password is required.")+"</div>").css("display","block");else if(i.trim()!=a.trim())r.append('<div class="error"><i class="icon" data-app-icon="r" aria-hidden="true"></i>'+__("Password and confirmation password do not match.")+"</div>").css("display","block");else if(s&&i.trim()==a.trim()){var o=e("#submit_confirmation");/s/.test(location.protocol)&&o.attr("action",o.attr("action").replace("http:","https:")),o.submit()}return!!ppConfig.hasOwnProperty("is_responsive_snippet")||void t.preventDefault()})},destroy:function(t){e(t).off().removeData("component")}}}})}(jQuery,PP_APP),$(document).ready(function(){$(".snippets-container").length&&"undefined"!=typeof guestCardConfirmation&&$.publish("manager.startModule",[{module:"ppGuestCardConfirmation",component:"guestCard",data:[".snippets-container",guestCardConfirmation]}])});