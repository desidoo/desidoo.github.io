!function(t){var e={parentUrl:window.location.hostname,childUrl:window.location.hostname,pageUrl:window.location.href,originUrl:window.location.origin},a=function(a){this.config=t.extend({},e,"object"==typeof a&&a),this.config.subdomain=this.config.subdomain||"",this.config.query=this.config.query||"",this.closeModules=this.config.closeModules?this.config.closeModules:null,this.popupId=this.config.popupId?this.config.popupId:"cm_interface_popup",this.eventNamespace=this.config.popupId?"_"+this.config.popupId:"",this.popupContainerId=this.config.popupContainerId?this.config.popupContainerId:"cm_interface_container",this.init()};a.prototype={constructor:a,init:function(t){this.inited||(this.inited=!0,this.createPopup().getFrameRefs().addListeners())},open:function(t){this.inited&&this.popup.contentWindow.postMessage({action:"open",module:t},"*")},close:function(){this.inited&&this.popup.contentWindow.postMessage({action:"close"},"*")},createPopup:function(){var t=document.getElementById(this.popupId),e=this;return t&&(t.setAttribute("src",this.getUrl()),t.onload=function(){var t;"function"==typeof Event?t=new Event("contact-methods-ready"+e.eventNamespace,{bubbles:!0}):(t=document.createEvent("Event"),t.initEvent("contact-methods-ready"+e.eventNamespace,!0,!0)),window.dispatchEvent(t)}),this},addListeners:function(){return window.addEventListener("message",this.handleIncomingMessage.bind(this)),this},getFrameRefs:function(){return this.popupContainer=document.getElementById(this.popupContainerId),this.popup=document.getElementById(this.popupId),this},getUrl:function(){return this.config.originUrl+window.__LOCALE_DATA__.slug_url+"/?module=contact_button&action=popup&is_contact_bar=1&origin="+this.config.parentUrl+"&events_url="+this.config.pageUrl+(this.config.query?"&"+this.config.query:"")+(this.config.property_id?"&property_id="+this.config.property_id:"")+"&time_zone="+Intl.DateTimeFormat().resolvedOptions().timeZone},handleIncomingMessage:function(t){var e=t.origin||t.originalEvent.origin,a=this.config.subdomain||this.config.childUrl,n=t.data;if(e.replace(/http[s]?:\/\//,"")===a.replace(/(http[s]?:)?\/\//,""))switch(n.id){case"contact_btn":"clicked"===n.payload.action&&("function"==typeof this.closeModules?this.closeModules():this.close());break;case"contact_methods":"resize"===n.payload.action?(this.popup&&(this.popup.style.height=n.payload.height+"px"),this.popupContainer&&(this.popupContainer.style.height=this.popup.style.height)):"close"===n.payload.action&&("function"==typeof this.closeModules?this.closeModules():this.close())}},removeListeners:function(){window.removeEventListener("message",this.handleIncomingMessage)},destroy:function(){this.removeListeners()}},window.ContactMethods=a}(jQuery),+function(t,e){e.core.register({name:"ppContactMethods",component:"contactMethods",reset:!0,module:function(){return{init:function(a){var n=t(a),o=function(a,o,i){if(!t(".cm-vbutton").length){var d=(a.offset().left-n.offset().left)*i,s=a.offset().left+o.outerWidth();400<e.windowWidth?(s>e.windowWidth&&(d-=s-e.windowWidth+10),o.css({left:d+"px"})):o.css({left:-a.offset().left*!i+"px"})}},i=function(){n.find(".cm-interface-container").height(0).removeAttr("data-expanded").attr("aria-hidden",!0),n.data("contact-methods").close(),n.removeData("module-open"),n.find("[data-mcb-module]").removeClass("active").attr("aria-expanded",!1)},d=function(){(sessionStorage.getItem("chat_id")||sessionStorage.getItem("leasing_center_agent"))&&0<parseInt(sessionStorage.getItem("unread_message_count"))?(t('[data-mcb-module="chat"]').addClass("unread-chat-available"),t(".unread-chat-count").attr("data-unread-chats",sessionStorage.getItem("unread_message_count"))):(t('[data-mcb-module="chat"]').removeClass("unread-chat-available"),t(".unread-chat-count").attr("data-unread-chats",0))};t('[data-mcb-module="chat"]').length&&("undefined"==typeof n.data("load-status")&&(sessionStorage.getItem("chat_id")||sessionStorage.getItem("leasing_center_agent"))&&0<parseInt(sessionStorage.getItem("unread_message_count"))&&(n.data("contact-methods",new ContactMethods({closeModules:i})),n.data("load-status","loading")),setInterval(d,1e3)),n.find("[data-mcb-module]").on("clickortap",function(e){var a=t(this),d=a.data("mcb-module"),s=n.find("[data-mcb-module].active").length&&n.find("[data-mcb-module].active").data("mcb-module")===d,c=n.find(".cm-interface-container"),r=c.find(".cm-interface");if(o(a,n.find(".cm-interface-container"),1),document.getElementById("ppcb_btn")&&document.getElementById("ppcb_btn").contentWindow.postMessage({action:"close"},"*"),"undefined"==typeof n.data("load-status"))c.height(40).attr("data-expanded",!0).attr("aria-hidden",!1),n.find("[data-mcb-module]").removeClass("active").attr("aria-expanded",!1),a.addClass("active").attr("aria-expanded",!0),n.data("contact-methods",new ContactMethods({closeModules:i})),n.data("load-status","loading");else{if(c.height(0).removeAttr("data-expanded").attr("aria-hidden",!0),n.find("[data-mcb-module]").removeClass("active").attr("aria-expanded",!1),!s){"loaded"===n.data("load-status")&&n.data("module-open")!==d&&(i(),n.data("contact-methods").open(d),n.data("module-open",d));var l="loading"===n.data("load-status")?40:r.height();c.height(l).attr("data-expanded",!0).attr("aria-hidden",!1),n.find("[data-mcb-module]").removeClass("active").attr("aria-expanded",!1),a.addClass("active").attr("aria-expanded",!0)}n.find('[data-mcb-module="chat"]').hasClass("active")&&(t('[data-mcb-module="chat"]').removeClass("unread-chat-available"),sessionStorage.removeItem("unread_message_count"))}}),t(window).on("contact-methods-ready",function(){n.find(".js-loader-img").addClass("is-hidden"),n.find(".cm-interface-content").removeClass("is-hidden"),!n.find("[data-mcb-module].active").length&&(sessionStorage.getItem("chat_id")||sessionStorage.getItem("leasing_center_agent"))&&0<parseInt(sessionStorage.getItem("unread_message_count"))?(n.data("contact-methods").open("chat"),n.data("module-open","chat")):n.find("[data-mcb-module].active").length&&(n.data("contact-methods").open(n.find("[data-mcb-module].active").data("mcb-module")),n.data("module-open",n.find("[data-mcb-module].active").data("mcb-module"))),n.find('[data-mcb-module="chat"]').hasClass("active")&&(t('[data-mcb-module="chat"]').removeClass("unread-chat-available"),sessionStorage.removeItem("unread_message_count")),(sessionStorage.getItem("chat_id")||sessionStorage.getItem("leasing_center_agent"))&&0<parseInt(sessionStorage.getItem("unread_message_count"))&&sessionStorage.setItem("reload_chat",1),n.data("load-status","loaded")}),window.addEventListener("message",function(t){var e=t.data;switch(e.id){case"contact_btn":"clicked"===e.payload.action&&(n.find(".js-cm-dropdown").removeClass("active").attr("aria-expanded",!1),n.find(".cm-subitem-container").attr("aria-hidden",!0))}}),t(document).on("clickortap.collapseAll","body",function(e){t(e.target).is("[data-mcb-module], [data-mcb-module] *, .cm-interface-container")||(n.find(".cm-interface-container").height(0).removeAttr("data-expanded").attr("aria-hidden",!0),n.find("[data-mcb-module]").removeClass("active").attr("aria-expanded",!1)),t(e.target).is(".cm-subitem-container, .cm-subitem-container *, .js-cm-dropdown, .js-cm-dropdown *")||(n.find(".js-cm-dropdown").removeClass("active").attr("aria-expanded",!1),n.find(".cm-subitem-container").attr("aria-hidden",!0))}).on("clickortap.minimizeCM",".minimize-icon",function(t){}).on("resizeend.positionDropdowns, scrollend.positionDropdowns",function(){n.find("[data-mcb-module].active").length&&o(n.find("[data-mcb-module].active"),n.find(".cm-interface-container"),1),n.find(".js-cm-dropdown").each(function(){o(t(this),t(this).siblings(".cm-subitem-container"),0)})}),n.on("clickortap.dropdown",".js-cm-dropdown",function(e){var a=t(this);1==a.hasClass("languages-dropdown")&&trackingEvent(arrstrCustomCategoryArray.engagement,arrstrCustomActionArray.click_to_view,"MCB | Language Selector",!0),n.find(".js-cm-dropdown").not(a).removeClass("active"),n.find(".cm-subitem-container").not(a.siblings(".cm-subitem-container")).attr("aria-hidden",!0),a.toggleClass("active"),a.siblings(".cm-subitem-container").attr("aria-hidden",!a.hasClass("active")),a.attr("aria-expanded",a.hasClass("active")),o(t(this),t(this).siblings(".cm-subitem-container"),0),document.getElementById("ppcb_btn")&&document.getElementById("ppcb_btn").contentWindow.postMessage({action:"close"},"*")}).on("clickortap.setLocale",".js-set-website-locale",function(e){trackingEvent(arrstrCustomCategoryArray.engagement,arrstrCustomActionArray.click_to_view,"MCB | "+t(this).data("locale")+" Selected",!0),document.cookie="preferred_locale_code="+t(this).data("locale")+"; path=/; expires=1",window.location.reload()}),-1<window.location.href.indexOf("/?mcb-open=chat")&&n.find('[data-mcb-module="chat"]').trigger("clickortap"),-1<window.location.href.indexOf("/?mcb-open=watson-chat")&&n.find('[data-mcb-module="watson-chat"]').trigger("clickortap"),-1<window.location.href.indexOf("/?mcb-open=schedule-tour")&&n.find('[data-mcb-module="schedule-tour"]').trigger("clickortap"),-1<window.location.href.indexOf("/?mcb-open=guest-card")&&n.find('[data-mcb-module="guest-card"]').trigger("clickortap")},destroy:function(t){}}}})}(jQuery,PP_APP),jQuery(document).ready(function(t){t.publish("manager.spawnModule",[{module:"ppContactMethods",component:"contactMethods",data:[".cm-wrapper"]}])});